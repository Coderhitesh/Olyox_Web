import{r as e,j as r,C as j,k as i}from"./index-DRu1F7xs.js";import"./index.esm-3JU7jI4h.js";import"./index.esm-SWCDmeR9.js";import{a as l}from"./axios-upsvKRUO.js";const V=()=>{const u=sessionStorage.getItem("token"),[p,d]=e.useState(!1),[S,m]=e.useState(0),[n,g]=e.useState({Vastu:0,Architect:0,Interior:0}),[k,C]=e.useState(0),[y,F]=e.useState(0),[h,f]=e.useState({request:0,commission:0}),b=async()=>{var t,o;try{const{data:a}=await l.get("https://api.helpubuild.co.in/api/v1/users",{headers:{Authorization:`Bearer ${u}`}});m(a.data.length)}catch(a){i.error(((o=(t=a==null?void 0:a.response)==null?void 0:t.data)==null?void 0:o.message)||"Failed to fetch users")}},A=async()=>{var t,o;try{const{data:a}=await l.get("https://api.helpubuild.co.in/api/v1/get-all-provider"),c=a.data;g({Vastu:c.filter(s=>s.type==="Vastu").length,Architect:c.filter(s=>s.type==="Architect").length,Interior:c.filter(s=>s.type==="Interior").length})}catch(a){i.error(((o=(t=a==null?void 0:a.response)==null?void 0:t.data)==null?void 0:o.message)||"Failed to fetch providers")}},v=async()=>{try{const{data:t}=await l.get("https://api.helpubuild.co.in/api/v1/get-all-chat-record");C(t.data.length)}catch{i.error("Failed to load chat records")}},w=async()=>{try{const{data:t}=await l.get("https://api.helpubuild.co.in/api/v1/total-recharge-amount");F(t.data)}catch{i.error("Failed to load recharge amount")}},x=async()=>{try{const{data:t}=await l.get("https://api.helpubuild.co.in/api/v1/total-withdraw-and-commission");f({request:t.totalWithdrawAmount,commission:t.totalCommission})}catch{i.error("Failed to load withdraw data")}};return e.useEffect(()=>{d(!0),Promise.all([b(),A(),v(),w(),x()]).finally(()=>d(!1))},[]),p?r.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"60vh"},children:r.jsx(j,{color:"primary"})}):(n.Vastu,n.Architect,n.Interior,h.request,h.commission,r.jsx(r.Fragment,{children:r.jsx("div",{children:r.jsx("h2",{children:"Welcome to Olyox Dashboard"})})}))};export{V as default};
